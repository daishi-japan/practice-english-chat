# 英語学習チャットシステム 画面設計書

## 1. 画面一覧

| 画面ID | カテゴリ | 画面名 | 概要 | URLパス (例) |
| --- | --- | --- | --- | --- |
| **S01** | Main | チャット画面 (Main) | ユーザーとAIの対話を行うメイン画面。 | `/` (ルート) |
| **S02** | Main | ブックマーク一覧画面 | 保存したフレーズを確認・管理する画面。 | `/bookmarks` |
| **S03** | Main | 設定画面 (マイページ) | アカウント管理、ログアウト、退会を行う。 | `/settings` |
| **C01** | Common | サイドバー | アプリ全体のナビゲーションメニュー。 | (全画面共通配置) |
| **A01** | Auth | ログイン画面 | 既存ユーザーのログイン。 | `/login` |
| **A02** | Auth | 新規登録画面 | 新規ユーザー登録。 | `/signup` |
| **A03** | Auth | メール確認案内画面 | 登録直後のメール確認待ち画面。 | `/verify-request` |
| **A04** | Auth | パスワードリセット申請 | パスワードを忘れた際のリセットメール送信。 | `/forgot-password` |
| **A05** | Auth | パスワード再設定 | 新しいパスワードを設定する。 | `/reset-password` |
| **E01** | Error | 404 Not Found | 存在しないページへのアクセス。 | - |
| **E02** | Error | システムエラー | 予期せぬエラー発生時。 | - |
| **C02** | Common | 削除確認モーダル | ブックマーク削除時の確認。 | - |
| **M02** | Modal | ログアウト確認モーダル | ログアウト時の確認。 | - |
| **M03** | Modal | 退会確認モーダル | アカウント削除時の最終確認。 | - |

---

## 2. 画面詳細

### 2.0 C01: サイドバー (Navigation Sidebar)

認証済みエリア（Mainカテゴリ）の全画面で常時表示（SP時はハンバーガーメニュー等で格納）し、画面間のスムーズな移動を実現する。

#### 構成要素
*   **App Logo:** 最上部に配置。クリックでS01へ遷移。
*   **Main Navigation:**
    *   **New Chat:** プラスアイコン (+) or "New Chat" ボタン。現在の対話をリセットし、S01の初期状態へ戻る。
    *   **Bookmarks:** ブックマークアイコン (🔖)。S02へ遷移。
*   **User Menu (Bottom):** 最下部に配置。
    *   **Settings:** 歯車アイコン (⚙️) またはユーザーアイコン。S03へ遷移。
*   **Responsive:**
    *   **PC:** 画面左側に常時固定表示 (幅: 64px〜250px)。
    *   **SP:** ヘッダー左上のハンバーガーメニュー (≡) タップで左からスライドイン。

---

### 2.1 S01: チャット画面 (Main)

アプリケーションのホーム画面。ログイン後の初期画面。

#### 構成要素
*   **Sidebar (C01):** 左側に配置。
*   **Main Content:**
    *   **Chat Area:**
        *   **初期表示:** 「今日はどのようなシチュエーションの英語を学びたいですか？」
        *   **AI回答:** 3つの吹き出し（Formal, Casual, Native）。各吹き出しに音声再生・ブックマークボタン。
    *   **Input Area:** 画面下部に固定。テキスト入力欄、送信ボタン。

---

### 2.2 S02: ブックマーク一覧画面

保存したフレーズのリスト表示。

#### 構成要素
*   **Sidebar (C01):** 左側に配置。
*   **Main Content:**
    *   **Header:** タイトル「Bookmarks」
    *   **List:**
        *   フレーズカード（フレーズ、意味、音声ボタン、削除ボタン）
        *   削除ボタン押下時は **C02: 削除確認モーダル** を表示。

---

### 2.3 S03: 設定画面 (マイページ)

アカウント情報の確認とセッション管理。

#### 構成要素
*   **Sidebar (C01):** 左側に配置。
*   **Main Content:**
    *   **Header:** タイトル「Settings」
    *   **Account Info:** ユーザー名、メールアドレス表示
    *   **Actions:**
        *   **ログアウトボタン:** **M02: ログアウト確認モーダル** を表示。
        *   **退会する(Danger Zone):** 赤字で表示。**M03: 退会確認モーダル** を表示。

---

### 2.4 A01: ログイン画面 / A02: 新規登録画面

未認証ユーザーがアクセスするエントリーポイント。**サイドバーは表示しない。**

#### 共通構成
*   **Title:** アプリロゴ、画面タイトル（Login / Sign Up）
*   **Form:**
    *   メールアドレス入力欄
    *   パスワード入力欄
    *   メインボタン（ログイン / 登録）
    *   Googleログインボタン（任意: Supabase Auth連携）
*   **Links:**
    *   (A01時) 「新規登録はこちら」→ A02へ
    *   (A01時) 「パスワードを忘れた方」→ A04へ
    *   (A02時) 「既にアカウントをお持ちの方」→ A01へ

---

### 2.5 A03: メール確認案内画面

A02で新規登録ボタン押下後、メール認証が必要な場合に表示。**サイドバーは表示しない。**

#### 構成要素
*   **Message:** 「確認メールを送信しました。メール内のリンクをクリックして登録を完了してください。」
*   **Action:** 「ログイン画面へ戻る」ボタン

---

### 2.6 A04: パスワードリセット申請 / A05: パスワード再設定

**サイドバーは表示しない。**

#### A04: 申請画面
*   **Form:** メールアドレス入力欄、「リセットメールを送信」ボタン。
*   送信後、「メールを送信しました」の旨を表示し、ログイン画面へのリンクを表示。

#### A05: 再設定画面
*   メールリンクから遷移してくる。
*   **Form:** 新しいパスワード入力欄、「パスワードを変更する」ボタン。
*   変更完了後、自動でログインさせるか、ログイン画面へ誘導する。

---

### 2.7 E01: 404 / E02: Error

#### 構成要素
*   **Message:**
    *   E01: "Page Not Found"
    *   E02: "Something went wrong"
*   **Action:** 「ホームへ戻る」ボタン (S01へ遷移)

---

### 2.8 モーダル詳細

*   **C02: 削除確認:** 「このブックマークを削除しますか？」 [キャンセル] [削除]
*   **M02: ログアウト確認:** 「ログアウトしますか？」 [キャンセル] [ログアウト]
*   **M03: 退会確認:** 「アカウントを削除すると、保存したブックマークなどの全データが完全に削除され復元できません。本当に退会しますか？」 [キャンセル] [退会する(赤)]

---

## 3. 画面遷移図 (簡易版)

```mermaid
graph TD
    %% Auth Flow
    Entry((Start)) --> A01[A01: Login]
    Entry --> A02[A02: SignUp]
    A01 <--> A02
    A01 -->|Forgot PW| A04[A04: Reset Req]
    A04 -.->|Email Link| A05[A05: New PW]
    A02 -->|Submit| A03[A03: Verify Wait]
    
    %% Main Flow (Sidebar Enabled)
    subgraph Authenticated Area
        C01[[C01: Sidebar]]
        S01[S01: Chat (Home)]
        S02[S02: Bookmarks]
        S03[S03: Settings]
    end
    
    A01 -->|Success| S01
    A05 -->|Success| S01
    
    C01 -.-> S01
    C01 -.-> S02
    C01 -.-> S03
    
    %% Actions/Modals
    S02 -->|Delete| C02[C02: Delete Confirm]
    S03 -->|Logout| M02[M02: Logout Confirm]
    S03 -->|Delete Acc| M03[M03: Delete Acc Confirm]
    
    M02 -->|Yes| A01
    M03 -->|Yes| A02
    
    %% Errors
    Err[Error/404] -->|Home| S01
```

## 4. スタイル・デザイン指針

*   **レイアウト:**
    *   **Sidebar Layout:** PCでは左固定、SPではオーバーレイ。メインコンテンツの幅を圧迫しすぎないよう調整。
*   **カラーパレット:**
    *   ベース: 白 (#FFFFFF) / 薄いグレー (#F5F5F5)
    *   メイン: 知的な青 (#0070F3)
    *   サイドバー背景: メインカラーの濃色版 または 薄いグレー（視覚的区切りをつける）
    *   アクセント: オレンジ/緑 (学習意欲向上)
*   **レスポンシブ:** SPファーストで設計。サイドバー開閉のタッチ操作性を重視。
